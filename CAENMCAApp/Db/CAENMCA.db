record(waveform, "$(P)$(Q)TITLE")
{
    field(DESC, "Run title")
    field(NELM, "256")
    field(FTVL, "CHAR")
    field(DTYP, "asynOctetRead")
    field(INP,  "@asyn($(PORT),0,0)RUNTITLE")
    field(SCAN, "I/O Intr")
    info(INTEREST, "HIGH")
    info(archive, "VAL")
}

record(waveform, "$(P)$(Q)TITLE:SP")
{
    field(DESC, "Set Run title")
    field(NELM, "256")
    field(FTVL, "CHAR")
    field(DTYP, "asynOctetWrite")
    field(INP,  "@asyn($(PORT),0,0)RUNTITLE")
    field(PINI, "YES")
    info(autosaveFields, "VAL")
}

record(waveform, "$(P)$(Q)COMMENT")
{
    field(DESC, "Run comment")
    field(NELM, "512")
    field(FTVL, "CHAR")
    field(DTYP, "asynOctetRead")
    field(INP,  "@asyn($(PORT),0,0)RUNCOMMENT")
    field(SCAN, "I/O Intr")
    info(INTEREST, "HIGH")
    info(archive, "VAL")
}

record(waveform, "$(P)$(Q)COMMENT:SP")
{
    field(DESC, "Set Run comment")
    field(NELM, "256")
    field(FTVL, "CHAR")
    field(DTYP, "asynOctetWrite")
    field(INP,  "@asyn($(PORT),0,0)RUNCOMMENT")
    field(PINI, "YES")
    info(autosaveFields, "VAL")
}

record(stringin, "$(P)$(Q)RUNNUMBER")
{
    field(DESC, "Run Number")
    field(DTYP, "asynOctetRead")
    field(INP,  "@asyn($(PORT),0,0)RUNNUMBER")
    field(VAL, "0")
    field(SCAN, "I/O Intr")
    info(INTEREST, "HIGH")
    info(archive, "VAL")
}

record(longin, "$(P)$(Q)IRUNNUMBER")
{
    field(DESC, "Run Number")
    field(DTYP, "asynInt32")
    field(INP,  "@asyn($(PORT),0,0)IRUNNUMBER")
    field(SCAN, "I/O Intr")
    info(INTEREST, "MEDIUM")
	info(archive, "VAL")
	field(EGU, "")
}

# save last run number
record(longout, "$(P)$(Q)_IRUNNUMBER")
{
    field(DESC, "Run Number")
    field(DTYP, "asynInt32")
    field(OUT,  "@asyn($(PORT),0,0)IRUNNUMBER")
	field(EGU, "")
    field(PINI, "YES")
    info(autosaveFields_pass0, "VAL") # use positions/pass0 as saved more frequently
    info(asyn:READBACK, "1") # needed as we increment run number in driver code
}

record(stringin, "$(P)$(Q)FILEPREFIX")
{
    field(DESC, "File Prefix")
    field(DTYP, "asynOctetRead")
    field(INP,  "@asyn($(PORT),0,0)FILEPREFIX")
    field(SCAN, "I/O Intr")
    info(INTEREST, "HIGH")
    info(autosaveFields, "VAL")
}

record(stringout, "$(P)$(Q)FILEPREFIX:SP")
{
    field(DESC, "File Prefix")
    field(DTYP, "asynOctetWrite")
    field(OUT,  "@asyn($(PORT),0,0)FILEPREFIX")
    field(PINI, "YES")
    info(INTEREST, "HIGH")
    info(autosaveFields, "VAL")
}

record(bo, "$(P)$(Q)BEGINALL:SP")
{
    field(DESC, "Begin all hexagons")
    field(ZNAM, "0")
    field(ONAM, "1")
    #Set the initial alarm state
    field(UDFS, "NO_ALARM")
    field(DTYP, "asynInt32")
    field(OUT,  "@asyn($(PORT),0,0)BEGINRUNALL")
    field(FLNK, "$(P)$(Q)SYNCDAE:BEGIN.PROC CA")
}

record(event, "$(P)$(Q)ABORTALL:SP")
{
    field(DESC, "Abort all hexagons")
    field(VAL, "AbortRun")
    field(FLNK, "$(P)$(Q)SYNCDAE:ABORT.PROC CA")
}

record(bo, "$(P)$(Q)ENDALL:SP")
{
    field(DESC, "End all hexagons")
    field(ZNAM, "0")
    field(ONAM, "1")
    #Set the initial alarm state
    field(UDFS, "NO_ALARM")
    field(DTYP, "asynInt32")
    field(OUT,  "@asyn($(PORT),0,0)ENDRUNALL")
    field(FLNK, "$(P)$(Q)SYNCDAE:END.PROC CA")
}
